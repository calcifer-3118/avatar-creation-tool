import{H as h,r as p,n as E,j as A}from"./index-C-IPMWa8.js";const N=a=>{try{return JSON.parse(a)}catch{return}},w=(a,e)=>p.useMemo(()=>{let t=`https://${a||"demo"}.readyplayer.me`;return e!=null&&e.language&&(t+=`/${e.language}`),t+="/avatar?frameApi&source=react-avatar-creator",e!=null&&e.clearCache&&(t+="&clearCache"),e!=null&&e.quickStart&&(t+="&quickStart"),e!=null&&e.bodyType&&(t+=`&bodyType=${e==null?void 0:e.bodyType}`),e!=null&&e.token&&(t+=`&token=${e==null?void 0:e.token}`),e!=null&&e.avatarId&&(t+=`&id=${e==null?void 0:e.avatarId}`),t},[a,e]),v="message",b="readyplayerme",T="v1.frame.ready",c=({subdomain:a,className:e,style:t,config:l,onEventReceived:d})=>{const m=p.useRef(null),n=w(a,l),o=()=>{var u,r,y;(u=m.current)!=null&&u.contentWindow&&((y=(r=m.current)==null?void 0:r.contentWindow)==null||y.postMessage(JSON.stringify({target:b,type:"subscribe",eventName:"v1.**"}),"*"))},s=u=>{const r=N(u.data);if((r==null?void 0:r.source)===b){if((r==null?void 0:r.eventName)===T){o();return}d==null||d(r)}};return p.useEffect(()=>(window.addEventListener(v,s),()=>{window.removeEventListener(v,s)}),[]),h.createElement("iframe",{title:"Ready Player Me",ref:m,src:n,style:t,className:e,allow:"camera *; clipboard-write"})},x=({subdomain:a,className:e,style:t,config:l,onUserSet:d,onAvatarExported:m,onUserAuthorized:n,onAssetUnlock:o})=>{const s={"v1.avatar.exported":m,"v1.user.set":d,"v1.user.authorized":n,"v1.asset.unlock":o},u=r=>{var y;(y=s[r.eventName])==null||y.call(s,r)};return h.createElement(c,{subdomain:a,className:e,style:t,config:l,onEventReceived:u})},S={clearCache:!0,bodyType:"fullbody",quickStart:!1,language:"en"},k={width:"100%",height:"100vh",border:"none"};function M(){const a=E(),e=t=>{console.log(t.data.url);const l=t.data.url;a("/home",{state:{avatarUrl:l}})};return A.jsx(x,{subdomain:"avatar-creation-tool",config:S,style:k,onAvatarExported:e})}export{M as default};
